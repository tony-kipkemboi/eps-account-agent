# Databricks Asset Bundle Configuration
# Deploy with: databricks bundle deploy --target <environment>
# Docs: https://docs.databricks.com/en/dev-tools/bundles/index.html

bundle:
  name: eps_account_agent

# Variables that can be overridden per environment
variables:
  catalog:
    default: eps_intelligence
  schema:
    default: agents
  model_name:
    default: eps_account_agent
  secret_scope:
    default: eps_agent
  llm_endpoint:
    default: databricks-gpt-5-mini

# Workspace settings
workspace:
  host: https://dbc-4c764595-9799.cloud.databricks.com

# Include agent code
include:
  - ./agent/*.py

# Deployment targets (environments)
targets:
  # Development - for testing
  dev:
    mode: development
    default: true
    workspace:
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/dev
    variables:
      catalog: eps_intelligence_dev
      schema: agents

  # Staging - for UAT
  staging:
    workspace:
      root_path: /Workspace/Shared/.bundle/${bundle.name}/staging
    variables:
      catalog: eps_intelligence_staging

  # Production
  prod:
    mode: production
    workspace:
      root_path: /Workspace/Shared/.bundle/${bundle.name}/prod
    variables:
      catalog: eps_intelligence

# Note: Agent serving endpoints are deployed via the deploy_notebook.py
# using agents.deploy() which handles endpoint creation automatically.
# DAB is used here for syncing code and managing environments.
